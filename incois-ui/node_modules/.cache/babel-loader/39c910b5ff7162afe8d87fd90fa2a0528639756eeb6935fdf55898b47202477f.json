{"ast":null,"code":"const defaultOpts = {\n  _useHtmlParser2: false\n};\n/**\n * Flatten the options for Cheerio.\n *\n * This will set `_useHtmlParser2` to true if `xml` is set to true.\n *\n * @param options - The options to flatten.\n * @param baseOptions - The base options to use.\n * @returns The flattened options.\n */\nexport function flattenOptions(options, baseOptions) {\n  if (!options) {\n    return baseOptions !== null && baseOptions !== void 0 ? baseOptions : defaultOpts;\n  }\n  const opts = {\n    _useHtmlParser2: !!options.xmlMode,\n    ...baseOptions,\n    ...options\n  };\n  if (options.xml) {\n    opts._useHtmlParser2 = true;\n    opts.xmlMode = true;\n    if (options.xml !== true) {\n      Object.assign(opts, options.xml);\n    }\n  } else if (options.xmlMode) {\n    opts._useHtmlParser2 = true;\n  }\n  return opts;\n}","map":{"version":3,"names":["defaultOpts","_useHtmlParser2","flattenOptions","options","baseOptions","opts","xmlMode","xml","Object","assign"],"sources":["D:\\Map\\node_modules\\cheerio\\src\\options.ts"],"sourcesContent":["import type { DomHandlerOptions } from 'domhandler';\nimport type { ParserOptions as HTMLParser2ParserOptions } from 'htmlparser2';\nimport type { ParserOptions as Parse5ParserOptions } from 'parse5';\nimport type { Htmlparser2TreeAdapterMap } from 'parse5-htmlparser2-tree-adapter';\nimport type { Options as SelectOptions } from 'cheerio-select';\nimport type { DomSerializerOptions } from 'dom-serializer';\n\n/**\n * Options accepted by htmlparser2, the default parser for XML.\n *\n * @see https://github.com/fb55/htmlparser2/wiki/Parser-options\n */\nexport interface HTMLParser2Options\n  extends DomHandlerOptions,\n    DomSerializerOptions,\n    HTMLParser2ParserOptions {\n  /** Treat the input as an XML document. */\n  xmlMode?: boolean;\n}\n\n/**\n * Options accepted by Cheerio.\n *\n * Please note that parser-specific options are _only recognized_ if the\n * relevant parser is used.\n */\nexport interface CheerioOptions\n  extends Parse5ParserOptions<Htmlparser2TreeAdapterMap> {\n  /**\n   * Recommended way of configuring htmlparser2 when wanting to parse XML.\n   *\n   * This will switch Cheerio to use htmlparser2.\n   *\n   * @default false\n   */\n  xml?: HTMLParser2Options | boolean;\n\n  /**\n   * Enable xml mode, which will switch Cheerio to use htmlparser2.\n   *\n   * @deprecated Please use the `xml` option instead.\n   * @default false\n   */\n  xmlMode?: boolean;\n\n  /** The base URI for the document. Used to resolve the `href` and `src` props. */\n  baseURI?: string | URL;\n\n  /**\n   * Is the document in quirks mode?\n   *\n   * This will lead to `.className` and `#id` being case-insensitive.\n   *\n   * @default false\n   */\n  quirksMode?: SelectOptions['quirksMode'];\n  /**\n   * Extension point for pseudo-classes.\n   *\n   * Maps from names to either strings of functions.\n   *\n   * - A string value is a selector that the element must match to be selected.\n   * - A function is called with the element as its first argument, and optional\n   *   parameters second. If it returns true, the element is selected.\n   *\n   * @example\n   *\n   * ```js\n   * const $ = cheerio.load(\n   *   '<div class=\"foo\"></div><div data-bar=\"boo\"></div>',\n   *   {\n   *     pseudos: {\n   *       // `:foo` is an alias for `div.foo`\n   *       foo: 'div.foo',\n   *       // `:bar(val)` is equivalent to `[data-bar=val s]`\n   *       bar: (el, val) => el.attribs['data-bar'] === val,\n   *     },\n   *   },\n   * );\n   *\n   * $(':foo').length; // 1\n   * $('div:bar(boo)').length; // 1\n   * $('div:bar(baz)').length; // 0\n   * ```\n   */\n  pseudos?: SelectOptions['pseudos'];\n}\n\n/** Internal options for Cheerio. */\nexport interface InternalOptions\n  extends HTMLParser2Options,\n    Omit<CheerioOptions, 'xml'> {\n  /**\n   * Whether to use htmlparser2.\n   *\n   * This is set to true if `xml` is set to true.\n   */\n  _useHtmlParser2?: boolean;\n}\n\nconst defaultOpts: InternalOptions = {\n  _useHtmlParser2: false,\n};\n\n/**\n * Flatten the options for Cheerio.\n *\n * This will set `_useHtmlParser2` to true if `xml` is set to true.\n *\n * @param options - The options to flatten.\n * @param baseOptions - The base options to use.\n * @returns The flattened options.\n */\nexport function flattenOptions(\n  options?: CheerioOptions | null,\n  baseOptions?: InternalOptions,\n): InternalOptions {\n  if (!options) {\n    return baseOptions ?? defaultOpts;\n  }\n\n  const opts: InternalOptions = {\n    _useHtmlParser2: !!options.xmlMode,\n    ...baseOptions,\n    ...options,\n  };\n\n  if (options.xml) {\n    opts._useHtmlParser2 = true;\n    opts.xmlMode = true;\n\n    if (options.xml !== true) {\n      Object.assign(opts, options.xml);\n    }\n  } else if (options.xmlMode) {\n    opts._useHtmlParser2 = true;\n  }\n\n  return opts;\n}\n"],"mappings":"AAoGA,MAAMA,WAAW,GAAoB;EACnCC,eAAe,EAAE;CAClB;AAED;;;;;;;;;AASA,OAAM,SAAUC,cAAcA,CAC5BC,OAA+B,EAC/BC,WAA6B;EAE7B,IAAI,CAACD,OAAO,EAAE;IACZ,OAAOC,WAAW,aAAXA,WAAW,cAAXA,WAAW,GAAIJ,WAAW;EACnC;EAEA,MAAMK,IAAI,GAAoB;IAC5BJ,eAAe,EAAE,CAAC,CAACE,OAAO,CAACG,OAAO;IAClC,GAAGF,WAAW;IACd,GAAGD;GACJ;EAED,IAAIA,OAAO,CAACI,GAAG,EAAE;IACfF,IAAI,CAACJ,eAAe,GAAG,IAAI;IAC3BI,IAAI,CAACC,OAAO,GAAG,IAAI;IAEnB,IAAIH,OAAO,CAACI,GAAG,KAAK,IAAI,EAAE;MACxBC,MAAM,CAACC,MAAM,CAACJ,IAAI,EAAEF,OAAO,CAACI,GAAG,CAAC;IAClC;EACF,CAAC,MAAM,IAAIJ,OAAO,CAACG,OAAO,EAAE;IAC1BD,IAAI,CAACJ,eAAe,GAAG,IAAI;EAC7B;EAEA,OAAOI,IAAI;AACb","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}